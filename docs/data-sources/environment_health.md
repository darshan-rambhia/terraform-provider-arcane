---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "arcane_environment_health Data Source - terraform-provider-arcane"
subcategory: ""
description: |-
  Use this data source to check whether an Arcane environment's agent is connected and healthy.
  This calls the environment test endpoint to verify connectivity. Can be used in preconditions
  to ensure the agent is online before attempting deployments.
  Example Usage
  
  data "arcane_environment_health" "production" {
    environment_id = arcane_environment.production.id
  }
  
  resource "arcane_project_deployment" "webapp" {
    # ...
  
    lifecycle {
      precondition {
        condition     = data.arcane_environment_health.production.is_connected
        error_message = "Agent is not connected"
      }
    }
  }
---

# arcane_environment_health (Data Source)

Use this data source to check whether an Arcane environment's agent is connected and healthy.

This calls the environment test endpoint to verify connectivity. Can be used in preconditions
to ensure the agent is online before attempting deployments.

## Example Usage

```hcl
data "arcane_environment_health" "production" {
  environment_id = arcane_environment.production.id
}

resource "arcane_project_deployment" "webapp" {
  # ...

  lifecycle {
    precondition {
      condition     = data.arcane_environment_health.production.is_connected
      error_message = "Agent is not connected"
    }
  }
}
```

## Example Usage

```terraform
data "arcane_environment_health" "production" {
  environment_id = arcane_environment.production.id
}

resource "arcane_project_deployment" "webapp" {
  environment_id = arcane_environment.production.id
  project_id     = data.arcane_project.webapp.id

  lifecycle {
    precondition {
      condition     = data.arcane_environment_health.production.is_connected
      error_message = "Agent is not connected"
    }
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `environment_id` (String) The ID of the environment to check.

### Read-Only

- `error_message` (String) Error message if the agent is not connected. Empty when connected.
- `is_connected` (Boolean) Whether the agent is connected and responding.
